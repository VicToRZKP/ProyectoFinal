<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Métodos Numéricos - Raíces de Ecuaciones</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.11.0/math.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header p {
            color: #7f8c8d;
            font-size: 1.2em;
        }
        
        .nav-menu {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }
        
        .nav-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .nav-btn {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }
        
        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
        }
        
        .nav-btn.active {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.3);
        }
        
        .content-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            display: none;
        }
        
        .content-section.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #bdc3c7;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }
        
        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 10px rgba(52, 152, 219, 0.2);
        }
        
        .calculate-btn {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 18px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(46, 204, 113, 0.3);
        }
        
        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(46, 204, 113, 0.4);
        }
        
        .results {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            border-left: 5px solid #3498db;
        }
        
        .chart-container {
            margin: 20px 0;
            height: 400px;
            position: relative;
        }
        
        .method-info {
            background: #ecf0f1;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .method-info h3 {
            color: #2c3e50;
            margin-bottom: 15px;
        }
        
        .theory-section {
            background: #fff;
            border-radius: 10px;
            padding: 25px;
            margin: 20px 0;
            border: 1px solid #ddd;
        }
        
        .theory-section h2 {
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        
        .formula {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            text-align: center;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .error { color: #e74c3c; font-weight: bold; }
        .success { color: #27ae60; font-weight: bold; }
        
        .iteration-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        
        .iteration-table th, .iteration-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        
        .iteration-table th {
            background: #3498db;
            color: white;
        }
        
        .iteration-table tr:nth-child(even) {
            background: #f2f2f2;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Métodos Numéricos</h1>
            <p>Raíces de Ecuaciones - Aplicaciones del Mundo Real</p>
        </div>
        
        <div class="nav-menu">
            <div class="nav-buttons">
                <button class="nav-btn active" onclick="showSection('teoria')">Teoría</button>
                <button class="nav-btn" onclick="showSection('app1')">Cálculo de Interés</button>
                <button class="nav-btn" onclick="showSection('app2')">Diseño de Puentes</button>
                <button class="nav-btn" onclick="showSection('app3')">Reacciones Químicas</button>
            </div>
        </div>
        
        <!-- Sección de Teoría -->
        <div id="teoria" class="content-section active">
            <div class="theory-section">
                <h2>Introducción a las Raíces de Ecuaciones</h2>
                <p>Las raíces de ecuaciones son valores que hacen que una función sea igual a cero. Estos métodos son esenciales en ingeniería, física, economía y muchas otras disciplinas.</p>
                
                <h3>Métodos Numéricos Implementados:</h3>
                
                <div class="method-info">
                    <h3>1. Método de Bisección</h3>
                    <p>Método robusto que garantiza convergencia. Divide el intervalo por la mitad en cada iteración.</p>
                    <div class="formula">
                        x<sub>r</sub> = (x<sub>l</sub> + x<sub>u</sub>) / 2
                    </div>
                    <p><strong>Ventajas:</strong> Siempre converge, simple de implementar</p>
                    <p><strong>Desventajas:</strong> Convergencia lenta</p>
                </div>
                
                <div class="method-info">
                    <h3>2. Método de Newton-Raphson</h3>
                    <p>Método de convergencia rápida que utiliza la derivada de la función.</p>
                    <div class="formula">
                        x<sub>i+1</sub> = x<sub>i</sub> - f(x<sub>i</sub>) / f'(x<sub>i</sub>)
                    </div>
                    <p><strong>Ventajas:</strong> Convergencia cuadrática</p>
                    <p><strong>Desventajas:</strong> Requiere la derivada, puede diverger</p>
                </div>
                
                <div class="method-info">
                    <h3>3. Método de la Secante</h3>
                    <p>Similar a Newton-Raphson pero aproxima la derivada usando diferencias finitas.</p>
                    <div class="formula">
                        x<sub>i+1</sub> = x<sub>i</sub> - f(x<sub>i</sub>) * (x<sub>i</sub> - x<sub>i-1</sub>) / (f(x<sub>i</sub>) - f(x<sub>i-1</sub>))
                    </div>
                    <p><strong>Ventajas:</strong> No requiere derivada, convergencia rápida</p>
                    <p><strong>Desventajas:</strong> Menos estable que Newton-Raphson</p>
                </div>
                
                <div class="method-info">
                    <h3>4. Método de Regula Falsi</h3>
                    <p>Combina la robustez de bisección con la eficiencia de secante.</p>
                    <div class="formula">
                        x<sub>r</sub> = x<sub>u</sub> - f(x<sub>u</sub>) * (x<sub>l</sub> - x<sub>u</sub>) / (f(x<sub>l</sub>) - f(x<sub>u</sub>))
                    </div>
                    <p><strong>Ventajas:</strong> Siempre converge, más rápido que bisección</p>
                    <p><strong>Desventajas:</strong> Puede ser lento en algunos casos</p>
                </div>
            </div>
        </div>
        
        <!-- Aplicación 1: Cálculo de Interés Compuesto -->
        <div id="app1" class="content-section">
            <h2>Aplicación 1: Cálculo de Tasa de Interés</h2>
            <p>Encuentra la tasa de interés necesaria para alcanzar un objetivo financiero específico.</p>
            
            <div class="grid">
                <div>
                    <div class="form-group">
                        <label>Capital Inicial ($):</label>
                        <input type="number" id="capital1" value="10000" step="0.01">
                    </div>
                    <div class="form-group">
                        <label>Monto Final Deseado ($):</label>
                        <input type="number" id="montoFinal1" value="20000" step="0.01">
                    </div>
                    <div class="form-group">
                        <label>Tiempo (años):</label>
                        <input type="number" id="tiempo1" value="5" step="0.1">
                    </div>
                    <div class="form-group">
                        <label>Método Numérico:</label>
                        <select id="metodo1">
                            <option value="bisection">Bisección</option>
                            <option value="newton">Newton-Raphson</option>
                            <option value="secant">Secante</option>
                            <option value="regula">Regula Falsi</option>
                        </select>
                    </div>
                    <button class="calculate-btn" onclick="calcularInteres()">Calcular Tasa de Interés</button>
                </div>
                <div>
                    <div class="chart-container">
                        <canvas id="chart1"></canvas>
                    </div>
                </div>
            </div>
            <div id="results1" class="results" style="display:none;"></div>
        </div>
        
        <!-- Aplicación 2: Diseño de Puentes -->
        <div id="app2" class="content-section">
            <h2>Aplicación 2: Diseño Estructural de Puentes</h2>
            <p>Calcula la deflexión crítica de una viga para el diseño de puentes.</p>
            
            <div class="grid">
                <div>
                    <div class="form-group">
                        <label>Carga Distribuida (N/m):</label>
                        <input type="number" id="carga2" value="50000" step="1000">
                    </div>
                    <div class="form-group">
                        <label>Longitud de la Viga (m):</label>
                        <input type="number" id="longitud2" value="20" step="0.1">
                    </div>
                    <div class="form-group">
                        <label>Módulo de Elasticidad (GPa):</label>
                        <input type="number" id="modulo2" value="200" step="1">
                    </div>
                    <div class="form-group">
                        <label>Momento de Inercia (m⁴):</label>
                        <input type="number" id="inercia2" value="0.01" step="0.001">
                    </div>
                    <div class="form-group">
                        <label>Método Numérico:</label>
                        <select id="metodo2">
                            <option value="bisection">Bisección</option>
                            <option value="newton">Newton-Raphson</option>
                            <option value="secant">Secante</option>
                            <option value="regula">Regula Falsi</option>
                        </select>
                    </div>
                    <button class="calculate-btn" onclick="calcularDeflexion()">Calcular Deflexión</button>
                </div>
                <div>
                    <div class="chart-container">
                        <canvas id="chart2"></canvas>
                    </div>
                </div>
            </div>
            <div id="results2" class="results" style="display:none;"></div>
        </div>
        
        <!-- Aplicación 3: Reacciones Químicas -->
        <div id="app3" class="content-section">
            <h2>Aplicación 3: Cinética de Reacciones Químicas</h2>
            <p>Determina la concentración de equilibrio en reacciones químicas.</p>
            
            <div class="grid">
                <div>
                    <div class="form-group">
                        <label>Concentración Inicial (mol/L):</label>
                        <input type="number" id="concentracion3" value="2.0" step="0.1">
                    </div>
                    <div class="form-group">
                        <label>Constante de Equilibrio:</label>
                        <input type="number" id="constante3" value="0.5" step="0.01">
                    </div>
                    <div class="form-group">
                        <label>Tiempo de Reacción (min):</label>
                        <input type="number" id="tiempo3" value="10" step="0.1">
                    </div>
                    <div class="form-group">
                        <label>Orden de Reacción:</label>
                        <select id="orden3">
                            <option value="1">Primer Orden</option>
                            <option value="2">Segundo Orden</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Método Numérico:</label>
                        <select id="metodo3">
                            <option value="bisection">Bisección</option>
                            <option value="newton">Newton-Raphson</option>
                            <option value="secant">Secante</option>
                            <option value="regula">Regula Falsi</option>
                        </select>
                    </div>
                    <button class="calculate-btn" onclick="calcularReaccion()">Calcular Concentración</button>
                </div>
                <div>
                    <div class="chart-container">
                        <canvas id="chart3"></canvas>
                    </div>
                </div>
            </div>
            <div id="results3" class="results" style="display:none;"></div>
        </div>
    </div>

    <script>
        let charts = {};
        
        function showSection(sectionId) {
            // Ocultar todas las secciones
            const sections = document.querySelectorAll('.content-section');
            sections.forEach(section => section.classList.remove('active'));
            
            // Mostrar la sección seleccionada
            document.getElementById(sectionId).classList.add('active');
            
            // Actualizar botones
            const buttons = document.querySelectorAll('.nav-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }
        
        // Métodos numéricos
        function bisectionMethod(func, xl, xu, tol = 1e-6, maxIter = 100) {
            let iterations = [];
            let xr, error;
            
            for (let i = 0; i < maxIter; i++) {
                xr = (xl + xu) / 2;
                let fr = func(xr);
                let fl = func(xl);
                
                if (i > 0) {
                    error = Math.abs((xr - iterations[i-1].xr) / xr) * 100;
                } else {
                    error = 100;
                }
                
                iterations.push({
                    iteration: i + 1,
                    xl: xl,
                    xu: xu,
                    xr: xr,
                    fr: fr,
                    error: error
                });
                
                if (Math.abs(fr) < tol || error < tol) break;
                
                if (fl * fr < 0) {
                    xu = xr;
                } else {
                    xl = xr;
                }
            }
            
            return { root: xr, iterations: iterations };
        }
        
        function newtonRaphsonMethod(func, dfunc, x0, tol = 1e-6, maxIter = 100) {
            let iterations = [];
            let x = x0;
            let error;
            
            for (let i = 0; i < maxIter; i++) {
                let fx = func(x);
                let dfx = dfunc(x);
                
                if (Math.abs(dfx) < 1e-12) break;
                
                let xNew = x - fx / dfx;
                
                if (i > 0) {
                    error = Math.abs((xNew - x) / xNew) * 100;
                } else {
                    error = 100;
                }
                
                iterations.push({
                    iteration: i + 1,
                    x: x,
                    fx: fx,
                    dfx: dfx,
                    xNew: xNew,
                    error: error
                });
                
                if (Math.abs(fx) < tol || error < tol) break;
                
                x = xNew;
            }
            
            return { root: x, iterations: iterations };
        }
        
        function secantMethod(func, x0, x1, tol = 1e-6, maxIter = 100) {
            let iterations = [];
            let error;
            
            for (let i = 0; i < maxIter; i++) {
                let f0 = func(x0);
                let f1 = func(x1);
                
                if (Math.abs(f1 - f0) < 1e-12) break;
                
                let x2 = x1 - f1 * (x1 - x0) / (f1 - f0);
                
                if (i > 0) {
                    error = Math.abs((x2 - x1) / x2) * 100;
                } else {
                    error = 100;
                }
                
                iterations.push({
                    iteration: i + 1,
                    x0: x0,
                    x1: x1,
                    f0: f0,
                    f1: f1,
                    x2: x2,
                    error: error
                });
                
                if (Math.abs(f1) < tol || error < tol) break;
                
                x0 = x1;
                x1 = x2;
            }
            
            return { root: x1, iterations: iterations };
        }
        
        function regulaFalsiMethod(func, xl, xu, tol = 1e-6, maxIter = 100) {
            let iterations = [];
            let xr, error;
            
            for (let i = 0; i < maxIter; i++) {
                let fl = func(xl);
                let fu = func(xu);
                
                xr = xu - fu * (xl - xu) / (fl - fu);
                let fr = func(xr);
                
                if (i > 0) {
                    error = Math.abs((xr - iterations[i-1].xr) / xr) * 100;
                } else {
                    error = 100;
                }
                
                iterations.push({
                    iteration: i + 1,
                    xl: xl,
                    xu: xu,
                    xr: xr,
                    fr: fr,
                    error: error
                });
                
                if (Math.abs(fr) < tol || error < tol) break;
                
                if (fl * fr < 0) {
                    xu = xr;
                } else {
                    xl = xr;
                }
            }
            
            return { root: xr, iterations: iterations };
        }
        
        // Aplicación 1: Cálculo de Interés
        function calcularInteres() {
            const P = parseFloat(document.getElementById('capital1').value);
            const F = parseFloat(document.getElementById('montoFinal1').value);
            const t = parseFloat(document.getElementById('tiempo1').value);
            const metodo = document.getElementById('metodo1').value;
            
            // Función: F = P(1 + r)^t, resolvemos para r
            // f(r) = P(1 + r)^t - F = 0
            const func = (r) => P * Math.pow(1 + r, t) - F;
            const dfunc = (r) => P * t * Math.pow(1 + r, t - 1);
            
            let result;
            switch(metodo) {
                case 'bisection':
                    result = bisectionMethod(func, 0.001, 0.5);
                    break;
                case 'newton':
                    result = newtonRaphsonMethod(func, dfunc, 0.1);
                    break;
                case 'secant':
                    result = secantMethod(func, 0.05, 0.15);
                    break;
                case 'regula':
                    result = regulaFalsiMethod(func, 0.001, 0.5);
                    break;
            }
            
            const tasaAnual = result.root * 100;
            
            // Mostrar resultados
            const resultsDiv = document.getElementById('results1');
            resultsDiv.style.display = 'block';
            resultsDiv.innerHTML = `
                <h3>Resultados del Cálculo de Tasa de Interés</h3>
                <p><strong>Tasa de Interés Anual:</strong> ${tasaAnual.toFixed(4)}%</p>
                <p><strong>Método Utilizado:</strong> ${metodo}</p>
                <p><strong>Iteraciones:</strong> ${result.iterations.length}</p>
                <p><strong>Verificación:</strong> $${P} × (1 + ${result.root.toFixed(6)})^${t} = $${(P * Math.pow(1 + result.root, t)).toFixed(2)}</p>
                
                <h4>Tabla de Iteraciones</h4>
                <table class="iteration-table">
                    <thead>
                        <tr>
                            <th>Iteración</th>
                            <th>Valor</th>
                            <th>Error (%)</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${result.iterations.map(iter => `
                            <tr>
                                <td>${iter.iteration}</td>
                                <td>${(iter.xr || iter.xNew || iter.x2 || iter.x).toFixed(6)}</td>
                                <td>${iter.error.toFixed(4)}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
            
            // Crear gráfica
            createChart1(P, result.root, t, F);
        }
        
        function createChart1(P, r, t, F) {
            const ctx = document.getElementById('chart1').getContext('2d');
            
            if (charts.chart1) {
                charts.chart1.destroy();
            }
            
            const años = [];
            const valores = [];
            
            for (let i = 0; i <= t; i += 0.5) {
                años.push(i);
                valores.push(P * Math.pow(1 + r, i));
            }
            
            charts.chart1 = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: años,
                    datasets: [{
                        label: 'Crecimiento del Capital',
                        data: valores,
                        borderColor: '#3498db',
                        backgroundColor: 'rgba(52, 152, 219, 0.1)',
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Tiempo (años)'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Valor ($)'
                            }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: `Crecimiento de $${P} al ${(r*100).toFixed(2)}% anual`
                        }
                    }
                }
            });
        }
        
        // Aplicación 2: Diseño de Puentes
        function calcularDeflexion() {
            const w = parseFloat(document.getElementById('carga2').value);
            const L = parseFloat(document.getElementById('longitud2').value);
            const E = parseFloat(document.getElementById('modulo2').value) * 1e9; // Convertir GPa a Pa
            const I = parseFloat(document.getElementById('inercia2').value);
            const metodo = document.getElementById('metodo2').value;
            
            // Ecuación de deflexión para viga simplemente apoyada
            // δ = (5wL^4)/(384EI) - δ_límite = 0
            // Resolvemos para encontrar la carga crítica
            const deltaLimite = L / 250; // Deflexión máxima permitida (L/250)
            
            // f(w) = (5wL^4)/(384EI) - δ_límite = 0
            const func = (w_var) => (5 * w_var * Math.pow(L, 4)) / (384 * E * I) - deltaLimite;
            const dfunc = (w_var) => (5 * Math.pow(L, 4)) / (384 * E * I);
            
            let result;
            switch(metodo) {
                case 'bisection':
                    result = bisectionMethod(func, 1000, 200000);
                    break;
                case 'newton':
                    result = newtonRaphsonMethod(func, dfunc, 50000);
                    break;
                case 'secant':
                    result = secantMethod(func, 40000, 60000);
                    break;
                case 'regula':
                    result = regulaFalsiMethod(func, 1000, 200000);
                    break;
            }
            
            const cargaCritica = result.root;
            const deflexionActual = (5 * w * Math.pow(L, 4)) / (384 * E * I);
            
            // Mostrar resultados
            const resultsDiv = document.getElementById('results2');
            resultsDiv.style.display = 'block';
            resultsDiv.innerHTML = `
                <h3>Resultados del Diseño Estructural</h3>
                <p><strong>Carga Crítica:</strong> ${cargaCritica.toFixed(2)} N/m</p>
                <p><strong>Carga Actual:</strong> ${w} N/m</p>
                <p><strong>Deflexión Actual:</strong> ${(deflexionActual * 1000).toFixed(2)} mm</p>
                <p><strong>Deflexión Máxima Permitida:</strong> ${(deltaLimite * 1000).toFixed(2)} mm</p>
                <p><strong>Factor de Seguridad:</strong> ${(cargaCritica / w).toFixed(2)}</p>
                <p><strong>Método Utilizado:</strong> ${metodo}</p>
                <p><strong>Iteraciones:</strong> ${result.iterations.length}</p>
                <p class="${w > cargaCritica ? 'error' : 'success'}">
                    <strong>Estado:</strong> ${w > cargaCritica ? 'SOBRECARGADO - PELIGROSO' : 'SEGURO'}
                </p>
                
                <h4>Tabla de Iteraciones</h4>
                <table class="iteration-table">
                    <thead>
                        <tr>
                            <th>Iteración</th>
                            <th>Carga (N/m)</th>
                            <th>Error (%)</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${result.iterations.map(iter => `
                            <tr>
                                <td>${iter.iteration}</td>
                                <td>${(iter.xr || iter.xNew || iter.x2 || iter.x).toFixed(2)}</td>
                                <td>${iter.error.toFixed(4)}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
            
            // Crear gráfica
            createChart2(L, E, I, w, cargaCritica);
        }
        
        function createChart2(L, E, I, wActual, wCritica) {
            const ctx = document.getElementById('chart2').getContext('2d');
            
            if (charts.chart2) {
                charts.chart2.destroy();
            }
            
            const cargas = [];
            const deflexiones = [];
            
            for (let w = 0; w <= wCritica * 1.5; w += wCritica * 0.05) {
                cargas.push(w);
                deflexiones.push((5 * w * Math.pow(L, 4)) / (384 * E * I) * 1000); // En mm
            }
            
            charts.chart2 = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: cargas.map(c => c.toFixed(0)),
                    datasets: [{
                        label: 'Deflexión vs Carga',
                        data: deflexiones,
                        borderColor: '#e74c3c',
                        backgroundColor: 'rgba(231, 76, 60, 0.1)',
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Carga Distribuida (N/m)'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Deflexión (mm)'
                            }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: `Deflexión de Viga - L=${L}m`
                        }
                    }
                }
            });
        }
        
        // Aplicación 3: Reacciones Químicas
        function calcularReaccion() {
            const C0 = parseFloat(document.getElementById('concentracion3').value);
            const k = parseFloat(document.getElementById('constante3').value);
            const t = parseFloat(document.getElementById('tiempo3').value);
            const orden = parseInt(document.getElementById('orden3').value);
            const metodo = document.getElementById('metodo3').value;
            
            let func, dfunc;
            
            if (orden === 1) {
                // Reacción de primer orden: C = C0 * e^(-kt)
                // Resolvemos para encontrar el tiempo necesario para alcanzar cierta concentración
                const CTarget = C0 * 0.5; // Tiempo de vida media
                func = (t_var) => C0 * Math.exp(-k * t_var) - CTarget;
                dfunc = (t_var) => -k * C0 * Math.exp(-k * t_var);
            } else {
                // Reacción de segundo orden: 1/C = 1/C0 + kt
                // Resolvemos para encontrar la concentración en equilibrio
                func = (C) => 1/C - 1/C0 - k*t;
                dfunc = (C) => -1/(C*C);
            }
            
            let result;
            switch(metodo) {
                case 'bisection':
                    if (orden === 1) {
                        result = bisectionMethod(func, 0.1, 20);
                    } else {
                        result = bisectionMethod(func, 0.1, C0);
                    }
                    break;
                case 'newton':
                    if (orden === 1) {
                        result = newtonRaphsonMethod(func, dfunc, 5);
                    } else {
                        result = newtonRaphsonMethod(func, dfunc, C0/2);
                    }
                    break;
                case 'secant':
                    if (orden === 1) {
                        result = secantMethod(func, 1, 10);
                    } else {
                        result = secantMethod(func, 0.5, C0*0.8);
                    }
                    break;
                case 'regula':
                    if (orden === 1) {
                        result = regulaFalsiMethod(func, 0.1, 20);
                    } else {
                        result = regulaFalsiMethod(func, 0.1, C0);
                    }
                    break;
            }
            
            let concentracionFinal, tiempoVidaMedia;
            
            if (orden === 1) {
                tiempoVidaMedia = result.root;
                concentracionFinal = C0 * Math.exp(-k * t);
            } else {
                concentracionFinal = result.root;
                tiempoVidaMedia = (1/C0) / k; // Aproximación para segundo orden
            }
            
            // Mostrar resultados
            const resultsDiv = document.getElementById('results3');
            resultsDiv.style.display = 'block';
            resultsDiv.innerHTML = `
                <h3>Resultados de la Cinética Química</h3>
                <p><strong>Orden de Reacción:</strong> ${orden}</p>
                <p><strong>Concentración Inicial:</strong> ${C0} mol/L</p>
                <p><strong>Constante de Velocidad:</strong> ${k} min⁻¹</p>
                ${orden === 1 ? 
                    `<p><strong>Tiempo de Vida Media:</strong> ${tiempoVidaMedia.toFixed(3)} min</p>
                     <p><strong>Concentración a los ${t} min:</strong> ${concentracionFinal.toFixed(4)} mol/L</p>` :
                    `<p><strong>Concentración Final:</strong> ${concentracionFinal.toFixed(4)} mol/L</p>
                     <p><strong>Reducción:</strong> ${((C0 - concentracionFinal)/C0 * 100).toFixed(2)}%</p>`
                }
                <p><strong>Método Utilizado:</strong> ${metodo}</p>
                <p><strong>Iteraciones:</strong> ${result.iterations.length}</p>
                
                <h4>Tabla de Iteraciones</h4>
                <table class="iteration-table">
                    <thead>
                        <tr>
                            <th>Iteración</th>
                            <th>Valor</th>
                            <th>Error (%)</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${result.iterations.map(iter => `
                            <tr>
                                <td>${iter.iteration}</td>
                                <td>${(iter.xr || iter.xNew || iter.x2 || iter.x).toFixed(6)}</td>
                                <td>${iter.error.toFixed(4)}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
            
            // Crear gráfica
            createChart3(C0, k, orden, t);
        }
        
        function createChart3(C0, k, orden, tMax) {
            const ctx = document.getElementById('chart3').getContext('2d');
            
            if (charts.chart3) {
                charts.chart3.destroy();
            }
            
            const tiempos = [];
            const concentraciones = [];
            
            for (let t = 0; t <= tMax * 2; t += tMax * 0.05) {
                tiempos.push(t);
                if (orden === 1) {
                    concentraciones.push(C0 * Math.exp(-k * t));
                } else {
                    concentraciones.push(1 / (1/C0 + k*t));
                }
            }
            
            charts.chart3 = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: tiempos.map(t => t.toFixed(1)),
                    datasets: [{
                        label: `Concentración vs Tiempo (Orden ${orden})`,
                        data: concentraciones,
                        borderColor: '#27ae60',
                        backgroundColor: 'rgba(39, 174, 96, 0.1)',
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Tiempo (min)'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Concentración (mol/L)'
                            }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: `Cinética de Reacción ${orden === 1 ? 'Primer' : 'Segundo'} Orden`
                        }
                    }
                }
            });
        }
        
        // Inicializar las aplicaciones con valores por defecto
        document.addEventListener('DOMContentLoaded', function() {
            // Inicializar gráficas vacías
            const ctx1 = document.getElementById('chart1').getContext('2d');
            const ctx2 = document.getElementById('chart2').getContext('2d');
            const ctx3 = document.getElementById('chart3').getContext('2d');
            
            charts.chart1 = new Chart(ctx1, {
                type: 'line', 
                data: { labels: [], datasets: [] },
                options: { responsive: true, maintainAspectRatio: false }
            });
            
            charts.chart2 = new Chart(ctx2, {
                type: 'line',
                data: { labels: [], datasets: [] },
                options: { responsive: true, maintainAspectRatio: false }
            });
            
            charts.chart3 = new Chart(ctx3, {
                type: 'line',
                data: { labels: [], datasets: [] },
                options: { responsive: true, maintainAspectRatio: false }
            });
        });
    </script>
</body>
</html>